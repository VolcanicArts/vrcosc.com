<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-V1/module-creation" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Module Creation | VRCOSC</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://VolcanicArts.github.io/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://VolcanicArts.github.io/img/logo.png"><meta data-rh="true" property="og:url" content="https://VolcanicArts.github.io/docs/V1/module-creation"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Module Creation | VRCOSC"><meta data-rh="true" name="description" content="Creating modules with V1&#x27;s SDK."><meta data-rh="true" property="og:description" content="Creating modules with V1&#x27;s SDK."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://VolcanicArts.github.io/docs/V1/module-creation"><link data-rh="true" rel="alternate" href="https://VolcanicArts.github.io/docs/V1/module-creation" hreflang="en"><link data-rh="true" rel="alternate" href="https://VolcanicArts.github.io/docs/V1/module-creation" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.672a8b88.css">
<script src="/assets/js/runtime~main.ff67dff4.js" defer="defer"></script>
<script src="/assets/js/main.59e9ff84.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="VRCOSC Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="VRCOSC Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">VRCOSC</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/welcome">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/VolcanicArts/VRCOSC" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/welcome">Welcome</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq">FAQ</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/v1">V1</a><button aria-label="Collapse sidebar category &#x27;V1&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/V1/module-creation">Module Creation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/V1/chatbox-v3">ChatBox V3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/V1/gesture-extensions">Gesture Extensions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/V1/weather">Weather</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/category/sdk">V2</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/v1"><span itemprop="name">V1</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Module Creation</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Module Creation</h1>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>V2 of the app is currently in development and has a new SDK for module creation which allows for installation of modules inside the app with automatic updates from GitHub releases. You can check it out in the <a href="https://discord.gg/vj4brHyvT5" target="_blank" rel="noopener noreferrer">Discord Server</a>!</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="notes">Notes<a class="hash-link" aria-label="Direct link to Notes" title="Direct link to Notes" href="/docs/V1/module-creation#notes">​</a></h2>
<p>Every module class is instantiated when VRCOSC is started. So if you have a module that has class-wide variables that control states, make sure to reset them in the <code>OnModuleStart</code> event.</p>
<p>I also recommend to never instantiate anything in the constructor of the module, rather make the objects you want to instantiate nullable and if they&#x27;re null in <code>OnModuleStart</code> then instantiate them. This will make sure that if a user doesn&#x27;t run the module but the objects you instantiate throw any exception, the app can still update and module updates can still be received.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="templates">Templates<a class="hash-link" aria-label="Direct link to Templates" title="Direct link to Templates" href="/docs/V1/module-creation#templates">​</a></h2>
<p>Templates are available through the use of NuGet. Running the following in a command prompt will install the template</p>
<p><code>dotnet new install VolcanicArts.VRCOSC.Templates</code></p>
<p>Next you can create a new project for your module where the project name is the module name.</p>
<p><code>dotnet new VRCOSCModuleDefault -n MODULENAME</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="assembly">Assembly<a class="hash-link" aria-label="Direct link to Assembly" title="Direct link to Assembly" href="/docs/V1/module-creation#assembly">​</a></h2>
<p>To organise your assembly in the listing screen, you need to set a custom AssemblyProduct. In Rider, this can be done here:
<img decoding="async" loading="lazy" src="https://github.com/VolcanicArts/VRCOSC/assets/29819296/27961cbf-008a-4acb-879f-48f1131b1ca7" alt="image" class="img_ev3q"></p>
<p>The AssemblyProduct is the name that will be used to display to the user what assembly your modules are contained in. This may change in the future.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing">Testing<a class="hash-link" aria-label="Direct link to Testing" title="Direct link to Testing" href="/docs/V1/module-creation#testing">​</a></h2>
<p>The custom template already moves your built assembly to the correct folder on build, however if your module requires libraries along side your module, you will need to create a folder inside the assemblies folder. It can be named whatever you want for now, and put your module assembly and dependencies inside there. This tells VRCOSC to load your module in an isolated environment, meaning you can use different versions of a library that may already be present in VRCOSC&#x27;s SDK. You will need to restart VRCOSC to load the modules.</p>
<h1>Class name</h1>
<p>The class name when creating a module must explicitly be the title of the module plus <code>Module</code>. This is to differentiate the class from anything else that may be inside the framework.</p>
<p>This class name is used when saving data, so if this class name is changed at any point, user data will not be read from storage and they will need to redefine all the settings they may have customised. It is vital this does not get changed, so choose a name that best fits the module&#x27;s purpose.</p>
<p>If, however, you <em>reaaaaaally</em> need to change a module&#x27;s name, you can use the <code>[ModuleLegacy(&quot;legacymodule&quot;)]</code> tag to allow for migration to occur.</p>
<h1>Metadata</h1>
<p>All modules are provided with a set of C# attributes to place on your module class to define the metadata of the module.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="title">Title<a class="hash-link" aria-label="Direct link to Title" title="Direct link to Title" href="/docs/V1/module-creation#title">​</a></h3>
<p>Defined using <code>[ModuleTitle(string title)]</code>. The title of the module is what&#x27;s shown to the user. This can be different from the class name explained before, but in practise it should match as to not cause confusion.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="description">Description<a class="hash-link" aria-label="Direct link to Description" title="Direct link to Description" href="/docs/V1/module-creation#description">​</a></h3>
<p>Defined using <code>[ModuleDescription(string shortDescription, string? longDescription = null)]</code>. A short description of your module and an optional longer description.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="author">Author<a class="hash-link" aria-label="Direct link to Author" title="Direct link to Author" href="/docs/V1/module-creation#author">​</a></h3>
<p>Defined using <code>[ModuleAuthor(string name, string? url = null, string? iconUrl = null)]</code>. Your name, most commonly your GitHub username. An optional URL to link your GitHub, and an optional icon URL for your icon to be displayed on your module.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="group">Group<a class="hash-link" aria-label="Direct link to Group" title="Direct link to Group" href="/docs/V1/module-creation#group">​</a></h3>
<p>Defined using <code>[ModuleGroup(ModuleType type)]</code>. For grouping your module. This is more for organisation than anything else, but allows the user to filter modules a lot easier. If you think your module requires a new module type, make a post in the <a href="https://discord.gg/vj4brHyvT5" target="_blank" rel="noopener noreferrer">Discord Server</a> and I&#x27;ll be happy to add it.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prefab">Prefab<a class="hash-link" aria-label="Direct link to Prefab" title="Direct link to Prefab" href="/docs/V1/module-creation#prefab">​</a></h3>
<p>Defined using <code>[ModulePrefab(string name, string? url = null)</code>. If this module is associated with a prefab, and if so the name of it, and an optional download URL.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="info">Info<a class="hash-link" aria-label="Direct link to Info" title="Direct link to Info" href="/docs/V1/module-creation#info">​</a></h3>
<p>Defined using <code>[ModuleInfo(string description, string? url = null)]</code>. This is allowed to be present on the class multiple times allowing for multiple info cards. This allows you to define text that appears in the help menu (the question mark on the module listing page). It&#x27;s meant to be used as a small area to notify users of any extra things they may have to do to work with the parameters listed, but can be used for anything you want to tell the user.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="legacy">Legacy<a class="hash-link" aria-label="Direct link to Legacy" title="Direct link to Legacy" href="/docs/V1/module-creation#legacy">​</a></h3>
<p>Defined using <code>[ModuleLegacy(string? legacySerialisedName = null]</code>. This allows you to migrate from a legacy serialised name if you want to change the class name of a module. This is a last resort as you should <em>never</em> need to change the name of a module, but in the event that you do the serialised name of a module is <code>classnamemodule</code>. For example, <code>MediaModule</code> becomes <code>mediamodule</code>. Once you&#x27;re satisfied that all the users of your module have had their module migrated you can take this attribute off, but it&#x27;s fine to leave on as VRCOSC will only do a single migration.</p>
<p>A <code>legacySerialisedName</code> of <code>null</code> will tell VRCOSC that you don&#x27;t want to do any legacy migration, which is equivalent to not having the attribute present at all.</p>
<h1>Attributes</h1>
<p>Attributes of a module are the settings and parameters. Settings allow the user to customise any settings you require for your module, and parameters are what get sent to and received from VRChat. Parameters specifically get registered to ensure that only the parameters you want enter and leave your module to let you not have to worry about filtering, however you can allow any parameter into your module using <code>OnAnyParameterReceived(ReceivedParameter parameter)</code> (explained later).</p>
<p>To create attributes, you must call <code>CreateSetting()</code> and <code>CreateParameter()</code> inside the overridden <code>CreateAttributes()</code> method. Below is an example taken from the Heartrate module.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public override void CreateAttributes()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CreateParameter&lt;bool&gt;(HeartrateParameter.Enabled, ParameterMode.Write, &quot;VRCOSC/Heartrate/Enabled&quot;, &quot;Enabled&quot;, &quot;Whether this module is attempting to emit values&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CreateParameter&lt;float&gt;(HeartrateParameter.Normalised, ParameterMode.Write, &quot;VRCOSC/Heartrate/Normalised&quot;, &quot;Normalised&quot;, &quot;The heartrate value normalised to 240bpm&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CreateParameter&lt;float&gt;(HeartrateParameter.Units, ParameterMode.Write, &quot;VRCOSC/Heartrate/Units&quot;, &quot;Units&quot;, &quot;The units digit 0-9 mapped to a float&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CreateParameter&lt;float&gt;(HeartrateParameter.Tens, ParameterMode.Write, &quot;VRCOSC/Heartrate/Tens&quot;, &quot;Tens&quot;, &quot;The tens digit 0-9 mapped to a float&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CreateParameter&lt;float&gt;(HeartrateParameter.Hundreds, ParameterMode.Write, &quot;VRCOSC/Heartrate/Hundreds&quot;, &quot;Hundreds&quot;, &quot;The hundreds digit 0-9 mapped to a float&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="settings">Settings<a class="hash-link" aria-label="Direct link to Settings" title="Direct link to Settings" href="/docs/V1/module-creation#settings">​</a></h2>
<p>A setting requires an Enum as a key. It&#x27;s recommended you create an Enum along the lines of <code>[ModuleName]Setting</code> to keep things organised.</p>
<p>Following that is the display name and description of the setting. These are cosmetic and only serve the purpose of describing what the setting does to the user. You have more space with the description that in the module metadata so this can be more in-depth.</p>
<p>Finally you define the default value of the setting. This <em>must</em> be set, even if it&#x27;s an empty string, or a false bool, as this tells the module what type the setting is.</p>
<p>Settings can also have an optional list of dependencies. These are other settings that are required to be in a certain state for this setting to be enabled and editable.</p>
<p>Settings get stored locally on a user&#x27;s machine under their keys. There are a few notes on how the storage works:</p>
<ul>
<li>If a key is changed or removed, the user&#x27;s value for the previous key is deleted</li>
<li>If a new key is added, the default setting will be used</li>
<li>If a user hasn&#x27;t changed the default value of a setting, and you change the default value, it will reflect on their end</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="settings-retrieval">Settings Retrieval<a class="hash-link" aria-label="Direct link to Settings Retrieval" title="Direct link to Settings Retrieval" href="/docs/V1/module-creation#settings-retrieval">​</a></h3>
<p>You can access settings by calling the <code>GetSetting&lt;T&gt;()</code> method where <code>T</code> is the setting&#x27;s type. If your setting is a list, you instead need to call <code>GetSettingList&lt;T&gt;()</code> where <code>T</code> is the contents of the list.</p>
<p>This can be done in any of the events (defined below), and it will return the latest value of what the user entered. Settings are editable at runtime so make sure you don&#x27;t cache settings locally unless you want that type of behaviour.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="parameters">Parameters<a class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters" href="/docs/V1/module-creation#parameters">​</a></h2>
<p>A parameter requires an Enum as a key. It&#x27;s recommended you create an Enum along the lines of <code>[ModuleName]Parameter</code>. Next is the parameter mode; This doesn&#x27;t affect how the data is sent, but is a contingency to make sure your code works as expected. Next is the parameter&#x27;s name, and then finally a description.</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    CreateParameter&lt;bool&gt;(MediaParameter.Play, ParameterMode.ReadWrite, @&quot;VRCOSC/Media/Play&quot;, &quot;Play/Pause&quot;, @&quot;True for playing. False for paused&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CreateParameter&lt;float&gt;(MediaParameter.Volume, ParameterMode.ReadWrite, @&quot;VRCOSC/Media/Volume&quot;, &quot;Volume&quot;, @&quot;The volume of the process that is controlling the media&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CreateParameter&lt;bool&gt;(MediaParameter.Muted, ParameterMode.ReadWrite, @&quot;VRCOSC/Media/Muted&quot;, &quot;Muted&quot;, @&quot;True to mute. False to unmute&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CreateParameter&lt;int&gt;(MediaParameter.Repeat, ParameterMode.ReadWrite, @&quot;VRCOSC/Media/Repeat&quot;, &quot;Repeat&quot;, @&quot;0 for disabled. 1 for single. 2 for list&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CreateParameter&lt;bool&gt;(MediaParameter.Shuffle, ParameterMode.ReadWrite, @&quot;VRCOSC/Media/Shuffle&quot;, &quot;Shuffle&quot;, @&quot;True for enabled. False for disabled&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CreateParameter&lt;bool&gt;(MediaParameter.Next, ParameterMode.Read, @&quot;VRCOSC/Media/Next&quot;, &quot;Next&quot;, @&quot;Becoming true causes the next track to play&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CreateParameter&lt;bool&gt;(MediaParameter.Previous, ParameterMode.Read, @&quot;VRCOSC/Media/Previous&quot;, &quot;Previous&quot;, @&quot;Becoming true causes the previous track to play&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To handle incoming parameters, methods can be overridden:</p>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    protected virtual void OnAnyParameterReceived(ReceivedParameter parameter) { }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // AvatarModule only</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected virtual void OnAvatarModuleReceived(AvatarParameter parameter) { }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // WorldModule only</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected virtual void OnWorldModuleReceived(WorldParameter parameter) { }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>OnAnyParameterReceived</code> should not be used unless you absolutely have to as this allows any avatar parameter to enter your module, not just the registered parameters. If you&#x27;d like an example, a viable use case is the Counter module.</p>
<h1>Events</h1>
<p>All modules come with default module events. These are separate from events that occur due to OSC. It&#x27;s important to note that all events are <em>synchronous</em> and if you need to do initialisation of something that will take more than a few microseconds you must use an asynchronous Task to stop the update thread freezing.</p>
<p>Events can be accessed by overriding the <code>OnModuleStart</code> and <code>OnModuleStop</code> methods. There are avatar specific events which can be accessed by overriding the <code>OnAvatarChange</code> and <code>OnPlayerUpdate</code> methods.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="general">General<a class="hash-link" aria-label="Direct link to General" title="Direct link to General" href="/docs/V1/module-creation#general">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="module-start">Module Start<a class="hash-link" aria-label="Direct link to Module Start" title="Direct link to Module Start" href="/docs/V1/module-creation#module-start">​</a></h3>
<p>The start event occurs whenever VRChat is started or a user manually started the modules. This is only called once on start so is the perfect place to do initial setup of anything your module may need to function, but which is dynamic at runtime.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="module-stop">Module Stop<a class="hash-link" aria-label="Direct link to Module Stop" title="Direct link to Module Stop" href="/docs/V1/module-creation#module-stop">​</a></h3>
<p>The stop event occurs when all modules are stopped due to VRChat closing or a user manually stopping the modules. This is only called once on stop so can be used to clear any OSC parameters on a user&#x27;s avatar and reset local module settings (if they aren&#x27;t already set to a default in Start).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="module-update">Module Update<a class="hash-link" aria-label="Direct link to Module Update" title="Direct link to Module Update" href="/docs/V1/module-creation#module-update">​</a></h3>
<p>To allow your module to have update methods, you define the <code>[ModuleUpdate]</code> attribute on any method you&#x27;d like to be called at a regular interval. The <code>ModuleUpdateMode</code> you provide gives insight into how you&#x27;d like the method to update. For example, the <code>ModuleUpdateMode</code> of <code>ChatBox</code> updates right before the ChatBox evaluates the clips, making it perfect for setting ChatBox data.
Setting the mode to <code>Custom</code> gives you control over if you&#x27;d like the update method to update once immediately and an update rate.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="avatar-specific">Avatar Specific<a class="hash-link" aria-label="Direct link to Avatar Specific" title="Direct link to Avatar Specific" href="/docs/V1/module-creation#avatar-specific">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="avatar-change">Avatar Change<a class="hash-link" aria-label="Direct link to Avatar Change" title="Direct link to Avatar Change" href="/docs/V1/module-creation#avatar-change">​</a></h3>
<p>The avatar change event occurs whenever a user enters a new avatar or when a user loads into a world. Bear in mind that if a user hasn&#x27;t started VRCOSC before VRChat then you will not receive this event for the first avatar they load into. The avatar ID is passed through this method for use.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="player-update">Player Update<a class="hash-link" aria-label="Direct link to Player Update" title="Direct link to Player Update" href="/docs/V1/module-creation#player-update">​</a></h3>
<p>This is called whenever anything about the player is updated, for example, their AFK parameter. This can be used to trigger module code that only needs to be ran when something happens to the player&#x27;s client.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="world-specific">World Specific<a class="hash-link" aria-label="Direct link to World Specific" title="Direct link to World Specific" href="/docs/V1/module-creation#world-specific">​</a></h2>
<p>World modules are currently not in use</p>
<h1>Persistence</h1>
<p>Modules have a thing called persistence, where you can save the state of your module so that a user can have persistent data. An example use-case of this is the <code>CounterModule</code></p>
<p>To enable persistence you define the <code>[ModulePersistent(string serialiseName, string? legacySerialisedName = null)]</code> on any property (must have <code>{ get; set; }</code> present). The property can be public or private. This takes in a serialised name to allow you to rename the property without it affecting the serialisation, and a legacy serialised name to allow you to change the serialised name while migrating from an old name so as not to lose the user&#x27;s data.</p>
<p>Do note that the persistence loads before <code>OnModuleStart</code> and saves after <code>OnModuleStop</code> to let you finalise the data if needed, and that the instance is set, meaning any references will be out of date by the time <code>OnModuleStart</code> is called, so ensure you only take references in or after your module has started.`</p>
<h1>ChatBox V3</h1>
<p>If you want your module to interface with ChatBox V3, have it extend <code>ChatBoxModule</code> instead of <code>AvatarModule</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-attributes">Creating Attributes<a class="hash-link" aria-label="Direct link to Creating Attributes" title="Direct link to Creating Attributes" href="/docs/V1/module-creation#creating-attributes">​</a></h2>
<p>To integrate with ChatBox V3 you need to create states, events, and variables.</p>
<p><em>ALWAYS</em> register variables before states/events as this allows you to call <code>GetVariableFormat()</code> so your states/events can contain the correctly formatted variables.</p>
<p>Every module that interacts with CBV3 should contain at least 1 state with a key of <code>default</code>. If a module only has a single state called <code>default</code> then the UI filters out the name to make it cleaner.</p>
<p>To create variables, call <code>CreateVariable()</code>. To create states and events, call <code>CreateState()</code> and <code>CreateEvent()</code> respectively</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-attributes">Setting Attributes<a class="hash-link" aria-label="Direct link to Setting Attributes" title="Direct link to Setting Attributes" href="/docs/V1/module-creation#setting-attributes">​</a></h2>
<p>To set states, call <code>ChangeStateTo()</code>. To trigger events, call <code>TriggerEvent()</code>. To set variable values, call <code>SetVariableValue()</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="onmodulestart">OnModuleStart<a class="hash-link" aria-label="Direct link to OnModuleStart" title="Direct link to OnModuleStart" href="/docs/V1/module-creation#onmodulestart">​</a></h2>
<p><em>ALWAYS</em> call <code>ChangeStateTo()</code> with your starting state. If you do not do this then CBV3 will not register your module as ChatBox-enabled until a valid state is set</p>
<h1>Custom Attribute UI</h1>
<p>Instead of calling <code>CreateSetting()</code> with the intent on adding a simple boolean or int, you can create a custom extension of <code>ModuleAttribute&lt;T&gt;</code> or <code>ModuleAttributeList&lt;T&gt;</code> and register that. This allows you to create custom UI.</p>
<p>As this isn&#x27;t a particularly mass use case as the default settings offered will be useful to 99% of people I won&#x27;t go into great detail here. If you&#x27;d like to get a rundown of how custom UI works then please go to the module-development channel on the Discord server and I&#x27;ll help you as it requires knowledge of the UI framework I use.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/VolcanicArts/VRCOSC/docs/V1/module-creation.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/category/v1"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">V1</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/V1/chatbox-v3"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ChatBox V3</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#notes">Notes</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#templates">Templates</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#assembly">Assembly</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#testing">Testing</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#title">Title</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#description">Description</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#author">Author</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#group">Group</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#prefab">Prefab</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#info">Info</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#legacy">Legacy</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#settings">Settings</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#settings-retrieval">Settings Retrieval</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#parameters">Parameters</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#general">General</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#module-start">Module Start</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#module-stop">Module Stop</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#module-update">Module Update</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#avatar-specific">Avatar Specific</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#avatar-change">Avatar Change</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#player-update">Player Update</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#world-specific">World Specific</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#creating-attributes">Creating Attributes</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#setting-attributes">Setting Attributes</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/V1/module-creation#onmodulestart">OnModuleStart</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 VolcanicArts. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>