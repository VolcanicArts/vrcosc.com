"use strict";(self.webpackChunkvrcosc_com=self.webpackChunkvrcosc_com||[]).push([["2088"],{4189:function(e,t,n){n.r(t),n.d(t,{default:()=>u,frontMatter:()=>l,metadata:()=>i,assets:()=>r,toc:()=>a,contentTitle:()=>d});var i=JSON.parse('{"id":"v2/sdk/settings","title":"Settings","description":"Create and use module settings","source":"@site/docs/v2/sdk/settings.md","sourceDirName":"v2/sdk","slug":"/v2/sdk/settings","permalink":"/docs/v2/sdk/settings","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"description":"Create and use module settings"},"sidebar":"docsSidebar","previous":{"title":"Flow","permalink":"/docs/v2/sdk/flow"},"next":{"title":"Parameters","permalink":"/docs/v2/sdk/parameters"}}'),s=n("5893"),o=n("65");let l={sidebar_position:4,description:"Create and use module settings"},d="Settings",r={},a=[{value:"Creating Settings",id:"creating-settings",level:2},{value:"Toggle",id:"toggle",level:3},{value:"TextBox",id:"textbox",level:3},{value:"Slider",id:"slider",level:3},{value:"Dropdown",id:"dropdown",level:3},{value:"DateTime",id:"datetime",level:3},{value:"TextBox List",id:"textbox-list",level:3},{value:"Custom",id:"custom",level:3},{value:"Groups",id:"groups",level:2},{value:"Reading Settings",id:"reading-settings",level:2},{value:"Writing Settings",id:"writing-settings",level:2},{value:"Custom Window",id:"custom-window",level:2}];function c(e){let t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"settings",children:"Settings"})}),"\n",(0,s.jsxs)(t.p,{children:["Settings are a way of letting a user configure your module. Settings are static, and are required to be defined inside ",(0,s.jsx)(t.code,{children:"OnPreLoad"})," so that a user's settings can be loaded when the module loads."]}),"\n",(0,s.jsx)(t.h2,{id:"creating-settings",children:"Creating Settings"}),"\n",(0,s.jsx)(t.h3,{id:"toggle",children:"Toggle"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-csharp",children:'CreateToggle(MyModule.ToggleSetting, "Toggle Title", "Toggle Description", false);\n'})}),"\n",(0,s.jsx)(t.p,{children:"Toggles take in the setting lookup, display title, display description, and the default value."}),"\n",(0,s.jsxs)(t.p,{children:["Backing type: ",(0,s.jsx)(t.code,{children:"bool"})]}),"\n",(0,s.jsx)(t.h3,{id:"textbox",children:"TextBox"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-csharp",children:'CreateTextBox(MyModule.TextBoxStringSetting, "String Title", "String Description", string.Empty);\r\nCreateTextBox(MyModule.TextBoxIntSetting, "Int Title", "Int Description", 0);\r\nCreateTextBox(MyModule.TextBoxFloatSetting, "Float Title", "Float Description", 0f);\n'})}),"\n",(0,s.jsx)(t.p,{children:"TextBoxes take the setting lookup, display title, display description, and the default value. TextBoxes support strings, ints, and floats, where the validation will be automatically handled for you."}),"\n",(0,s.jsxs)(t.p,{children:["Backing type: ",(0,s.jsx)(t.code,{children:"string"})]}),"\n",(0,s.jsx)(t.h3,{id:"slider",children:"Slider"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-csharp",children:'CreateSlider(MyModule.SliderIntSetting, "Int Title", "Int Description", 0, 0, 10);\r\nCreateSlider(MyModule.SliderFloatSetting, "Float Title", "Float Description", 0f, 0f, 1f);\n'})}),"\n",(0,s.jsx)(t.p,{children:"Sliders take the setting lookup, display title, display description, the default value, the minimum value, and the maximum value."}),"\n",(0,s.jsxs)(t.p,{children:["Backing type: ",(0,s.jsx)(t.code,{children:"int"}),"/",(0,s.jsx)(t.code,{children:"float"})," (depending on which slider you enter)"]}),"\n",(0,s.jsx)(t.h3,{id:"dropdown",children:"Dropdown"}),"\n",(0,s.jsx)(t.p,{children:"Note: Dropdowns only accept enums as settings are required to be static. If you need to populate a dynamic list, look at the runtime page."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-csharp",children:'CreateDropdown(MyModule.DropdownSetting, "Dropdown Title", "Dropdown Description", SomeEnum.SomeValue)\r\nCreateDropdown(MyModule.DropdownSetting, "Dropdown Title", "Dropdown Description", items, items[0], nameof(Item.Title), nameof(Item.Id))\n'})}),"\n",(0,s.jsx)(t.p,{children:"Dropdowns take the setting lookup, display title, display description, and the default value. The default value also tells the setting which enum to use to populate the dropdown."}),"\n",(0,s.jsxs)(t.p,{children:["Dropdowns can also take a list of items, along with the default selection, and the title and ID fields. A good example of this is the ",(0,s.jsx)(t.a,{href:"https://github.com/VolcanicArts/VRCOSC-Modules/blob/main/VRCOSC.Modules/Datetime/DateTimeModule.cs#L25",children:"DateTime"})," module fetching timezones."]}),"\n",(0,s.jsxs)(t.p,{children:["Backing type: ",(0,s.jsx)(t.code,{children:"SomeEnum"}),"/",(0,s.jsx)(t.code,{children:"string"})]}),"\n",(0,s.jsx)(t.h3,{id:"datetime",children:"DateTime"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-csharp",children:'CreateDateTime(MyModule.DateTimeSetting, "DateTime Title", "DateTime Description", DateTimeOffset.Now);\n'})}),"\n",(0,s.jsx)(t.p,{children:"DateTimes take the setting lookup, display title, display description, and default value."}),"\n",(0,s.jsxs)(t.p,{children:["Backing type: ",(0,s.jsx)(t.code,{children:"DateTimeOffset"})]}),"\n",(0,s.jsx)(t.admonition,{type:"info",children:(0,s.jsx)(t.p,{children:"DateTime automatically handles timezone conversion, meaning users can share their configs and it will convert to their local time allow things like countdowns to sync up."})}),"\n",(0,s.jsx)(t.h3,{id:"textbox-list",children:"TextBox List"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-csharp",children:'CreateTextBoxList(MyModule.TextBoxListStringSetting, "TextBox String List Title", "TextBox String List Description", ["Some", "Default", "Values"]);\r\nCreateTextBoxList(MyModule.TextBoxListIntSetting, "TextBox Int List Title", "TextBox Int List Description", [1, 2, 3]);\r\nCreateTextBoxList(MyModule.TextBoxListFloatSetting, "TextBox Float List Title", "TextBox Float List Description", [0f, 0.5f, 1f]);\n'})}),"\n",(0,s.jsx)(t.p,{children:"TextBox Lists create a list of textboxes. All of the textboxes are require to be the same value, and they support strings, ints, and floats."}),"\n",(0,s.jsxs)(t.p,{children:["Backing type: ",(0,s.jsx)(t.code,{children:"List<string>"}),"/",(0,s.jsx)(t.code,{children:"List<int>"}),"/",(0,s.jsx)(t.code,{children:"List<float>"})," (depending on which values you enter)"]}),"\n",(0,s.jsx)(t.h3,{id:"custom",children:"Custom"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-csharp",children:'CreateCustom(MyModule.CustomSetting, new CustomModuleSetting("My Custom Setting", "Custom setting description", typeof(CustomModuleSettingUserControl), "Some Value"));\n'})}),"\n",(0,s.jsxs)(t.p,{children:["Custom settings takes the setting lookup, the custom setting which requires, at least, the display title, display description, and the type of the custom ",(0,s.jsx)(t.code,{children:"UserControl"})," to render the setting."]}),"\n",(0,s.jsxs)(t.p,{children:["Creating custom settings requires knowledge of WPF so that you can create the custom ",(0,s.jsx)(t.code,{children:"UserControl"}),", and is generally not needed unless you're doing very custom modules. Feel free to reach out on Discord as if I can do a more general implementation of a setting and add it to the SDK that would benefit more."]}),"\n",(0,s.jsx)(t.admonition,{type:"info",children:(0,s.jsxs)(t.p,{children:["Your custom setting's ",(0,s.jsx)(t.code,{children:"UserControl"})," ",(0,s.jsx)(t.em,{children:"must"})," have a constructor that takes in the Module and CustomModuleSetting"]})}),"\n",(0,s.jsx)(t.h2,{id:"groups",children:"Groups"}),"\n",(0,s.jsx)(t.p,{children:"Setting groups can be made by providing setting lookups:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-csharp",children:'CreateGroup("My New Group", MyModule.ToggleSetting, MyModule.SliderIntSetting);\n'})}),"\n",(0,s.jsx)(t.p,{children:"These are only visual and allow for organisation."}),"\n",(0,s.jsx)(t.h2,{id:"reading-settings",children:"Reading Settings"}),"\n",(0,s.jsx)(t.p,{children:"There are 2 methods you can use to get a setting. One to get the setting, and one to get the setting value. Getting the setting value is a shorthand for getting the setting. You mostly won't need to access the setting directly, but it's useful for when you're making custom settings and need to access anything inside it."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-csharp",children:"GetSetting<CustomModuleSetting>(MyModule.CustomSetting);\r\nGetSettingValue<bool>(MyModule.ToggleSetting);\n"})}),"\n",(0,s.jsx)(t.p,{children:"Most of the time you'll be using the bottom method, where this retrieves the backing value of the setting directly. To access the value, use the backing type that is listed for the setting"}),"\n",(0,s.jsxs)(t.p,{children:["The raw value of the setting, if allowed, can be converted. For example, if you have a textbox string list you can either do ",(0,s.jsx)(t.code,{children:"GetSettingValue<IEnumerable<string>>()"})," or ",(0,s.jsx)(t.code,{children:"GetSettingValue<List<string>>()"}),". Both work exactly the same and is completely up to your preference."]}),"\n",(0,s.jsx)(t.h2,{id:"writing-settings",children:"Writing Settings"}),"\n",(0,s.jsxs)(t.p,{children:["To set a setting's value manually, you can now call ",(0,s.jsx)(t.code,{children:"SetSettingValue(lookup, value)"}),". This will only work with settings that have a single value. If you require adding to a list setting, use ",(0,s.jsx)(t.code,{children:"GetSetting"})," to retrieve the setting first and then manage the list."]}),"\n",(0,s.jsx)(t.h2,{id:"custom-window",children:"Custom Window"}),"\n",(0,s.jsxs)(t.p,{children:["If you don't want to use the auto-generated settings window and would rather create something custom, you can use the attribute ",(0,s.jsx)(t.code,{children:"[ModuleSettingsWindow(type)]"}),". Pass the type of the window that you want to be used instead."]}),"\n",(0,s.jsx)(t.p,{children:"Your window must:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Be of type ",(0,s.jsx)(t.code,{children:"Window"})]}),"\n",(0,s.jsxs)(t.li,{children:["Extend ",(0,s.jsx)(t.code,{children:"IManagedWindow"})," where the comparer is your module"]}),"\n",(0,s.jsx)(t.li,{children:"Take in your module in the constructor"}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Settings windows will be loaded whenever the user clicks on the settings button. The settings window is remade each time the settings is opened by the user, so anything you want cached should be kept in your module and referenced by your custom settings window."})]})}function u(e={}){let{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},65:function(e,t,n){n.d(t,{Z:function(){return d},a:function(){return l}});var i=n(7294);let s={},o=i.createContext(s);function l(e){let t=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);